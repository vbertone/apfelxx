#! /usr/bin/env bash

# These variables need to exist
prefix=@prefix@

if [[ $# -eq 0 || -n $( echo $* | egrep -- "--help|-h" ) ]]; then
    echo
    echo "Configuration tool for APFEL++: A PDF Evolution Library"
    echo "Webpage: https://github.com/vbertone/apfelxx"
    echo
    echo "Usage: apfel-config [Options]"
    echo "Options:"
    echo "  --help | -h : show this help message"
    echo "  --version   : code version"
    echo "  --prefix    : installation prefix"
    echo "  --incdir    : path to the APFEL++ header directory"
    echo "  --libdir    : path to the APFEL++ library directory"
    echo "  --cppflags  : compiler flags for use with C++ compilation"
    echo "  --cxxflags  : same as --cppflags"
    echo "  --cflags    : same as --cppflags"
    echo "  --ldflags   : compiler flags for use with the linker stage of compilation"
    echo "  --libs      : same as --ldflags"
fi

OUT=""

tmp=$( echo "$*" | egrep -- '--\<version\>')
test -n "$tmp" && OUT="$OUT @apfelxx_VERSION@"

tmp=$( echo "$*" | egrep -- '--\<prefix\>')
test -n "$tmp" && OUT="$OUT @prefix@"

tmp=$( echo "$*" | egrep -- '--\<incdir\>')
test -n "$tmp" && OUT="$OUT @includedir@"

tmp=$( echo "$*" | egrep -- '--\<libdir\>')
test -n "$tmp" && OUT="$OUT @libdir@"

tmp=$( echo "$*" | egrep -- '--\<cppflags\>')
test -n "$tmp" && OUT="$OUT @cflags@"

tmp=$( echo "$*" | egrep -- '--\<cxxflags\>')
test -n "$tmp" && OUT="$OUT @cflags@"

tmp=$( echo "$*" | egrep -- '--\<cflags\>')
test -n "$tmp" && OUT="$OUT @cflags@"

tmp=$( echo "$*" | egrep -- '--\<ldflags\>')
test -n "$tmp" && OUT="$OUT @ldflags@"

tmp=$( echo "$*" | egrep -- '--\<libs\>')
test -n "$tmp" && OUT="$OUT @ldflags@"

echo $OUT
